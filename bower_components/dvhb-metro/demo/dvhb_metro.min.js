angular.module("dvhbMetro",[]),function(t){"use strict";function e(){function e(e,i,s,o,r){function n(){f.resolve(),t.forEach(a,function(t,i){d[t]=d[t]||{},d[t].isDisabled=!e.stations||!l(e.stations,t)})}function l(e,i){return t.isArray(e)?e.indexOf(i)!=-1:!!t.isObject(e)&&t.isDefined(e[i])}var a,f=r.defer(),m=this,d={};e.metroInfo=null,a=s[0].querySelectorAll("[metro-station-name]"),a=[].map.call(a,function(t){return t.attributes["metro-station-name"].nodeValue}),n(),m.setMetroInfo=function(t){e.metroInfo=t},m.onSelectStation=function(i,o){var r=s[0].getBoundingClientRect();o={left:o.left-r.left,top:o.top-r.top},(e.metroInfo&&e.metroInfo.show||t.noop)(o),(e.onSelect||t.noop)(i,o)},m.findStation=function(e){var i=d[e];return t.isDefined(i)?i:{}},e.$watch("stations",n,!0)}function i(e,i,s){if(!document.getElementById("dvhb_metro_style_inline")){var o="metro:after{content:\"\";display:block;padding-bottom:120%}metro svg{position:absolute;left:0;top:0;width:100%}g.metro-station{cursor:pointer}g.metro-station.disabled{cursor:initial}g.metro-station.selected text,g.metro-station.selected tspan{font-weight:700!important}g.metro-station.disabled text,g.metro-station.disabled tspan{fill:gray;cursor:initial}g.metro-station text.style1{font-family:'PT Sans',sans-serif;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;font-size:20px}g.metro-station.disabled .metro-point{display:none}.st0{fill:#676A6B}.st3,.st4,.st5,.st6{fill:none}.st1{font-family:'PT Sans'}.st2{font-size:16}.st3{stroke:#93CE99;stroke-width:4;stroke-miterlimit:10}.st4{stroke:#DDE482;stroke-width:4;stroke-miterlimit:10}.st5{stroke:#62BFF8;stroke-width:4;stroke-miterlimit:10}.st6{stroke:#FFDF80;stroke-width:8;stroke-miterlimit:10}.st7{fill:#FFDF80}.st8{font-size:13}.st9{fill:none;stroke:#ACBFE2;stroke-width:8;stroke-miterlimit:10}.st10{fill:#ACBFE3}.st11{fill:#FFF}.st12{fill:none;stroke:#CFE58F;stroke-width:8;stroke-miterlimit:10}.st13{fill:#CFE58F}.st14{fill:none;stroke:#FFDF80;stroke-width:8;stroke-miterlimit:10}.st15{fill:#FFDF80}.st16{fill:none;stroke:#FABE94;stroke-width:8;stroke-miterlimit:10}.st17{fill:#FABE94}.st18{fill:none;stroke:#D3D3D5;stroke-width:8;stroke-miterlimit:10}.st19{fill:#D3D3D5}.st20{fill:none;stroke:#D8AC9D;stroke-width:8;stroke-miterlimit:10}.st21{fill:#9C563E}.st22{fill:none;stroke:#95D59F;stroke-width:8;stroke-miterlimit:10}.st23{fill:#4CB85E}.st24{fill:none;stroke:#7ACCCD;stroke-width:8;stroke-miterlimit:10}.st25{fill:#79CDCD}.st26{fill:none;stroke:#62BFF8;stroke-width:8;stroke-miterlimit:10}.st27{fill:#0078BF}.st28{fill:none;stroke:#8FE7FF;stroke-width:8;stroke-miterlimit:10}.st29{fill:#8FE7FF}.st30{fill:none;stroke:#C28FCC;stroke-width:8;stroke-miterlimit:10}.st31{fill:#C28FCC}.st32{fill:none;stroke:#F58C84;stroke-width:8;stroke-miterlimit:10}.st33{fill:#ED2C26}.st34{fill:none;stroke:#62BFF8;stroke-width:4;stroke-miterlimit:10}.st35{fill:#62BFF8}.st36{font-size:8}.st37{fill:none;stroke:#FABE94;stroke-width:4;stroke-miterlimit:10}.st38{fill:#DDE482}.st39,.st40,.st41,.st42,.st43,.st45,.st46,.st47,.st48,.st49{fill:none}.st39{stroke:#FFE394;stroke-width:4;stroke-miterlimit:10}.st40{stroke:#E98B89;stroke-width:4;stroke-miterlimit:10}.st41{stroke:#95D59F;stroke-width:9;stroke-miterlimit:10}.st42{stroke:#B3D346;stroke-width:9;stroke-miterlimit:10}.st43{stroke:#FABE94;stroke-width:9;stroke-miterlimit:10}.st44{fill:none;stroke:#C28FCC;stroke-width:9;stroke-miterlimit:10}.st45{stroke:#D3D3D5;stroke-width:9;stroke-miterlimit:10}.st46{stroke:#D8AC9D;stroke-width:9;stroke-miterlimit:10}.st47{stroke:#ACBFE2;stroke-width:9;stroke-miterlimit:10}.st48{stroke:#FFCB36;stroke-width:9;stroke-miterlimit:10}.st49{stroke:#62BFF8;stroke-width:9;stroke-miterlimit:10}.st50{font-size:20}.st51{fill:#D8AC9D}.st52{fill:#F58C84}.st53,.st54,.st55,.st56{fill:none}.st53{stroke:#FFF;stroke-width:2.6;stroke-miterlimit:10}.st54{stroke:#D3D3D5;stroke-width:9;stroke-miterlimit:10}.st55{stroke:#8FE7FF;stroke-width:9;stroke-miterlimit:10}.st56{stroke:#F58C84;stroke-width:9;stroke-miterlimit:10}.st57{fill:#95D59F}.st58{fill:#8FE7FF}.st59{fill:#FFDF80}.st60{fill:none;stroke:#4DB85D;stroke-width:9;stroke-miterlimit:10}.st61{fill:#F58C84}.st62{fill:#D3D3D5}.st63{fill:none;stroke:#8FE7FF;stroke-width:9;stroke-miterlimit:10}.st64{fill:none;stroke:#62BFF8;stroke-width:9;stroke-miterlimit:10}.st65{fill:#D3D3D5}.st66{fill:#FABE94}.st67{fill:none;stroke:#FFCB32;stroke-width:9;stroke-miterlimit:10}.anch-end{text-anchor:end}.anch-middle{text-anchor:middle}",r=document.createElement("style");r.id="dvhb_metro_style_inline",r.type="text/css",r.innerHTML=o,document.getElementsByTagName("head")[0].appendChild(r)}i.on("click",function(i){i.originalEvent.data&&i.originalEvent.data.fromStation||(e.metroInfo&&e.metroInfo.hide||t.noop)()})}return e.$inject=["$scope","$http","$element","$attrs","$q"],{restrict:"AE",replace:!1,transclude:!0,controller:e,controllerAs:"metro",link:i,templateUrl:function(t,e){return e.mapUrl||"./metro.svg"},scope:{stations:"=?",onSelect:"=?"}}}t.module("dvhbMetro").directive("metro",e)}(angular),function(t){"use strict";function e(){function t(t,e,i,s){function o(){for(var t,i,s=e.find("circle"),o=s.length-1;o>=0;o--)if((" "+s[o].className.baseVal+" ").indexOf(" metro-point ")>-1){t=s[o],i=t.getBoundingClientRect();break}return i?{left:i.left,top:i.top}:null}function r(e){t.data.isDisabled||(e.originalEvent.data={fromStation:!0},a.onSelectStation([l],o())),!t.data.isDisabled&&a.multiple&&(t.data.isActive=!t.data.isActive)}function n(){l=i.metroStationName,e.bind("click",r);var s=a.findStation(l);s&&(t.data=s,f&&f.registerStation(l,s),t.$watch("data.isDisabled",function(t){var i=e[0],s=/disabled/.test(i.className.baseVal);!s&&t&&(i.className.baseVal=i.className.baseVal+" disabled"),s&&!t&&(i.className.baseVal=i.className.baseVal.split(" ").filter(function(t){return"disabled"!=t}).join(" "))}))}var l,a=s[1],f=s[0];n()}return{require:["?^metroStationGroup","^metro"],restrict:"A",link:t,scope:{}}}t.module("dvhbMetro").directive("metroStationName",e)}(angular),function(t){"use strict";function e(){function e(e,i,s,o){function r(e){return t.extend(e,m)}function n(t){var s=t.left,o=t.top;e.offset&&e.offset.left&&(s+=e.offset.left||0),e.offset&&e.offset.top&&(o+=e.offset.top||0),i.css("left",s+"px"),i.css("top",o+"px"),i.css("display","block")}function l(){i.css("display","none")}function a(){return"block"==i.css("display")}function f(){i.css("position","absolute"),l(),d.setMetroInfo(r({})),e.control&&r(e.control)}var m,d=o[0];m={show:n,hide:l,isOpen:a},f()}return{require:["^metro"],restrict:"A",link:e,scope:{control:"=?",offset:"=?"}}}t.module("dvhbMetro").directive("metroInfo",e)}(angular),function(t){"use strict";function e(){function e(t,e){t.stations={},t.main="",this.registerStation=function(e,i){t.stations[e]=i,t.main=e}}function i(e,i,s,o){function r(){var i=!0;return t.forEach(e.stations,function(t,e){t.isDisabled===!1&&(i=!1)}),i}e.$watch(r,function(t){var e=i[0],s=/disabled/.test(e.className.baseVal);!s&&t&&(e.className.baseVal=e.className.baseVal+" disabled"),s&&!t&&(e.className.baseVal=e.className.baseVal.split(" ").filter(function(t){return"disabled"!=t}).join(" "))}),i.find("text").bind("click",function(t){var i=[];if(!r()){for(var s in e.stations)s.isDisabled||i.push(s);t.originalEvent.data={fromStation:!0};var n=t.target.getBoundingClientRect();o.onSelectStation(i,n)}})}return e.$inject=["$scope","$element"],{restrict:"A",link:i,require:"^metro",controller:e,replace:!1,scope:{}}}t.module("dvhbMetro").directive("metroStationGroup",e)}(angular);